# 期货复盘应用

这是一个使用Python和Kivy框架构建的期货复盘Android应用，用于记录和分析期货交易数据。

## 功能特点

### 1. 数据录入界面
- 支持录入完整的期货交易信息
- 包括品种、交易方向、开仓/平仓时间、各种价格参数等
- 支持多空方向选择
- 完整的交易信息字段

### 2. 数据分析界面
- 自动计算每个交易的盈亏
- 按品种汇总总盈亏
- 计算总胜率
- 提供直观的图表展示

### 3. 趋势图表
- 总盈亏按品种的柱状图
- 总胜率按品种的柱状图

## 技术栈

- Python 3
- Kivy 2.1.0
- SQLite3 (数据存储)
- Matplotlib (图表生成)

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
python main.py
```

## 构建Android APK

### 前置条件

1. 安装Buildozer
2. 配置Android SDK和NDK环境

### 构建步骤

```bash
# 初始化Buildozer环境
buildozer init

# 构建APK
buildozer -v android debug

# 构建发布版本APK
buildozer -v android release
```

## 应用使用说明

1. **数据录入**：在主界面填写完整的交易信息，点击"保存数据"按钮保存。
2. **数据分析**：点击"数据分析"按钮进入分析界面。
3. **品种筛选**：在分析界面可以选择特定品种或查看全部数据。
4. **查看图表**：分析界面自动生成总盈亏和胜率的柱状图。

## 数据字段说明

### 开仓信息
- 品种：交易的期货品种名称
- 交易方向：多或空
- 开仓时间：格式为XXXX年XX月XX日XX时XX分
- 开仓操作周期：整数
- 开仓起始边界均线：整数
- 预期目标边界均线：整数
- 驱动策略：文本描述
- 入场模式：文本描述
- 入场信号：文本描述
- 自损规则：文本描述
- 止盈规则：文本描述
- 开仓情绪：文本描述
- 开仓价格：带两位小数
- 回撤幅度：带两位小数

### 增仓减仓信息
- 增仓价格：带两位小数
- 增仓价格1：带两位小数
- 减仓价格：带两位小数
- 减仓价格1：带两位小数

### 平仓信息
- 平仓操作周期：整数
- 平仓时间：格式为XXXX年XX月XX日XX时XX分
- 平仓边界均线：整数
- 离场信号：文本描述
- 平仓情绪：文本描述
- 平仓价格：带两位小数

## 盈亏计算

```
盈亏 = 减仓价格 + 减仓价格1 + 平仓价格 - 开仓价格 - 增仓价格 - 增仓价格1
```

## 胜率计算

```
总胜率 = (同品种盈亏>0的次数 / 同品种盈亏<0的次数) × 100%
```

## 项目结构

```
.
├── main.py          # 主程序入口
├── requirements.txt # 依赖列表
├── buildozer.spec   # Buildozer配置文件
├── README.md        # 项目说明
└── futures_review.db # SQLite数据库文件（运行后自动生成）
```

## 注意事项

1. 首次运行会自动创建数据库文件
2. 建议定期备份数据库文件
3. 构建APK需要配置正确的Android开发环境
4. 应用支持Android API 21及以上版本

## 许可证

MIT License
